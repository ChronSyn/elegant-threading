/*!
 * elegant-threading v0.0.5 (Wed, 04 Mar 2020 16:06:09 GMT)
 * Made by Andrey Gubanov http://github.com/finom
 * Released under the MIT license
 * More info: https://github.com/finom/elegant-threading
 */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.elegantThreading=r():e.elegantThreading=r()}(window,(function(){return function(e){var r={};function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=r,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)n.d(t,o,function(r){return e[r]}.bind(null,o));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=1)}([function(e,r,n){"use strict";function t(e){return new Error("Threading error: ".concat({TERMINATED:"Cannot call threaded function because its worker was terminated",EXPORT_FUNCTION_DECLARATION:"Exported functions need to be defined as function declaration"}[e])||!1)}e.exports={stringifyExpored:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"".concat(e.map((function(e){var r=e.toString();if(!r.match(/function\s*\w+\s*\([\s\S]+/))throw t("EXPORT_FUNCTION_DECLARATION");return r})).join(";\n"),";\n")},stringifySource:function(e){return e.name?e.toString():"const ".concat("anonymous0"," = ").concat(e.toString(),";")},getError:t,getSourceFunctionName:function(e){return e.name||"anonymous0"}}},function(e,r,n){"use strict";var t=n(2),o=n(7);e.exports=function e(r,n){var i;return(i="undefined"!=typeof window&&"function"==typeof window.Worker?t(r,n):o(r,n)).fork=function(){return e(r,n)},i}},function(e,r,n){"use strict";var t=n(3),o=n(0),i=o.stringifyExpored,a=o.stringifySource,s=o.getError,c=o.getSourceFunctionName,u=0;e.exports=function(e,r){var n=window,o=n.Blob,f=n.URL,l=new(0,n.Worker)(f.createObjectURL(new o(["".concat(a(e),"\n      ").concat(i(r),"\n\n      let latestId0;\n\n      function callConsole0(method, args) {\n        try {\n          postMessage({ type: 'console', method: method, args: [].slice.call(args), id: latestId0 });\n        } catch(e) {\n          postMessage({ type: 'call', error: {\n            name: e.name,\n            stack: e.stack,\n            message: e.message,\n            lineNumber: e.lineNumber,\n            columnNumber: e.columnNumber,\n          }, id: latestId0 });\n        }\n      }\n\n      const consoleMethods0 = ['log', 'info', 'error', 'warn', 'clear', 'time', 'timeEnd', 'table', 'count', 'group', 'groupEnd'];\n      const console = {};\n\n      for(let i0 = 0; i0 < consoleMethods0.length; i0++) {\n        console[consoleMethods0[i0]] = function() { callConsole0(consoleMethods0[i0], arguments) }\n      }\n\n      onmessage = function(e) {\n        let result, error;\n        latestId0 = e.data.id;\n        try { result = ").concat(c(e),".apply(this, e.data.message) } catch(e) { error = {\n          name: e.name,\n          stack: e.stack,\n          message: e.message,\n          lineNumber: e.lineNumber,\n          columnNumber: e.columnNumber,\n        }; }\n        postMessage({ type: 'call', result: result, error: error, id: e.data.id });\n      }\n    ")],{type:"text/javascript"}))),d=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return new Promise((function(e,n){if(l.__isTerminated)throw s("TERMINATED");var o=u++,i=function r(i){var s=i.data;if(s.id===o)if("call"===s.type)l.removeEventListener("message",r),l.removeEventListener("message",a),s.error?n(Object.assign(Object.create(Error.prototype),s.error)):e(s.result);else if("console"===s.type){var c;(c=console)[s.method].apply(c,t(s.args))}},a=function e(r){l.removeEventListener("message",i),l.removeEventListener("message",e),n(r)};l.addEventListener("message",i),l.addEventListener("error",a),l.postMessage({message:r,id:o})}))};return d.terminate=function(){l.__isTerminated=!0,l.terminate()},d}},function(e,r,n){var t=n(4),o=n(5),i=n(6);e.exports=function(e){return t(e)||o(e)||i()}},function(e,r){e.exports=function(e){if(Array.isArray(e)){for(var r=0,n=new Array(e.length);r<e.length;r++)n[r]=e[r];return n}}},function(e,r){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,r){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(module,exports,__webpack_require__){"use strict";var _require=__webpack_require__(0),stringifyExpored=_require.stringifyExpored,stringifySource=_require.stringifySource,getError=_require.getError,getSourceFunctionName=_require.getSourceFunctionName,id=0;function nodeThreading(source,exported){var _eval=eval("require")("worker_threads"),Worker=_eval.Worker,worker=new Worker("".concat(stringifySource(source),"\n    ").concat(stringifyExpored(exported),"\n      const { parentPort, MessageChannel } = require('worker_threads');\n\n      parentPort.on('message', function(data0) {\n        parentPort.postMessage({ result: ").concat(getSourceFunctionName(source),".apply(this, data0.message), id: data0.id });\n      });\n\n    "),{eval:!0}),symbols=Object.getOwnPropertySymbols(worker),kHandleSymbol=symbols.find((function(e){return"kHandle"===e.description})),kHandle=worker[kHandleSymbol],threadedFunction=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return new Promise((function(e,n){if(worker.__isTerminated)throw getError("TERMINATED");var t=id++,o=function r(n){n.id===t&&(kHandle.unref(),worker.off("message",r),worker.off("message",i),e(n.result))},i=function e(r){kHandle.unref(),worker.off("message",o),worker.off("message",e),n(r)};kHandle.ref(),worker.on("message",o),worker.on("error",i),worker.postMessage({message:r,id:t})}))};return threadedFunction.terminate=function(){worker.__isTerminated=!0,worker.terminate()},threadedFunction}module.exports=nodeThreading}])}));
//# sourceMappingURL=elegant-threading.min.js.map